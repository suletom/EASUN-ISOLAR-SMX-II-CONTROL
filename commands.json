{
    "//comment1":"Commandsequences defines which commands to send in a row.",
    "commandsequences": [
        {"name": "set-wifi", "seq":["get_wifi_device_id","get_wifi_device_info","set_wifi_ssid","set_wifi_pw","restart_wifi"],"desc": "sets wifi datalogger network via wireless AP","args": "[datalogger ip address] [ssid] [password]" },
        {"name": "factory-reset-wifi", "seq":["factory_reset_wifi"],"desc": "wifi datalogger factory reset","args": "[datalogger ip address]" },
        {"name": "restart-wifi", "seq":["restart_wifi"],"desc": "wifi datalogger reset","args": "[datalogger ip address]" },
        {"name": "query-modbus", "seq":["query_modbus"],"desc": "query modbus register","args": "[datalogger ip address] [raw_modbus_packet_hex]" },
        {"name": "get-device-info", "seq":["get_device_id","get_device_info"],"desc": "gets wifi datalogger device id and other ifno","args": "[datalogger ip address]" },
        {"name": "get-smx-param", "seq":["get_smx_param"],"desc": "Get ISolar SMX II 3.6 inverter param value","args": "[datalogger ip address]" },
        {"name": "set-smx-param", "seq":["set_smx_param"],"desc": "Set ISolar SMX II 3.6 inverter param value WARNING: this is dangerous and experimental!","args": "[datalogger ip address] [parameter number] [new value]" }
    ],
    "//comment2":"Commands defines modbus tcp commands: some commands are for the wifi plug pro(clean modbus tcp frame: 2byte transaction id, 2byte protocol id, 2byte length, data: 1byte unit id, 1byte funtion code, etc. ), others are handled by the gateway and sent to the modbus rtu device on serial line.",
    "//comment3":"Modbus commands for the device: 2byte transaction id, 2byte protocol id, 2byte length, data: 1byte unit id, 1byte funtion code, (modbus rtu packet:  1byte unit id, 1byte funtion code(for the inverter), 2byte register address, 2byte register offset, 2byte crc( crc16/MODBUS: from the beginning of the modbus rtu packet)) ",
    "commands": [
        {"name": "get_wifi_device_id","cmd": "{SEQ}0001000aff01160b0a16102d012c"},
        {"name": "set_wifi_ssid","cmd": "{SEQ}0001{LEN}ff0329{ARG2}"},
        {"name": "set_wifi_pw","cmd": "{SEQ}0001{LEN}ff032b{ARG3}"},
        {"name": "restart_wifi","cmd": "{SEQ}00010004ff031d31"},
        {"name": "factory_reset_wifi","cmd": "{SEQ}00010004ff031d32"},
        {"name": "get_wifi_device_info","cmd": "{SEQ}00010003ff0205"},
        {"name": "query_modbus","cmd": "{ARG2}","raw": true},
        {"name": "get-smx-out-prio","cmd": "{SEQ}0001000aff04ff03e2040001e66d", "/*!example form param get/set: whole modbus rtu packet in modbus tcp*/":""},
        {"name": "set_smx_param","cmd": "{ARGP2}{ARGV3}","test": "{SEQ}0001{LEN}ff04ff10{ARGP}{ARGV}{CRC}"},
        {"name": "get_smx_param","cmd": "{SEQ}0001{LEN}ff04ff03{PARAM}{CRC}", "definition":
            [
                {"num":"1","name":"Output priority","address":"E204","type":"UInt16BE","unit": ["SOL","UTI","SBU"]},
                {"num":"2","name":"Output Frequency(Hz)","address":"E209","type":"UInt16BE","rate": 0.01,"format":1,"unit": "Hz" },
                {"num":"3","name":"Ac Input Voltage Range","address":"E20B","type":"UInt16BE","unit": ["APL","UPS"]},
                {"num":"4","name":"Turn to mains volt(V)","address":"E01B","type":"UInt16BE","rate": 0.2,"format":1,"unit": "V"},
                {"num":"5","name":"Turn to inverter volt(V)","address":"E022","type":"UInt16BE","rate": 0.2,"format":1,"unit": "V"},
                {"num":"6","name":"Charger source priority","address":"E20F","type":"UInt16BE","unit": ["CSO","CUB","SNU","OSO"]},
                {"num":"7","name":"Max charger current(A)","address":"E20A","type":"UInt16BE","rate":0.1,"format":1,"unit": "A"},
                {"num":"8","name":"Battery Type","address":"E004","type":"UInt16BE","unit": ["USE","SLd","FLd","GEL","LF07/LF08/LF09","NCA"]},
                {"num":"9","name":"Battery boost charge voltage(V)","address":"E008","type":"UInt16BE","rate": 0.2,"format":1,"unit": "V"},
                {"num":"10","name":"Battery boost charge time(Min)","address":"E012","type":"UInt16BE","format":0,"unit": "Sec"},
                {"num":"11","name":"Battery floating charge voltage(V)","address":"E009","type":"UInt16BE","rate": 0.2,"format":1,"unit": "V"},
                {"num":"12","name":"Battery over discharge voltage(V)","address":"E00D","type":"UInt16BE","rate": 0.2,"format":1,"unit": "V"},
                {"num":"13","name":"Battery over discharge delay time(S)","address":"E010","type":"UInt16BE","format":0,"unit": "Sec"},
                {"num":"14","name":"Battery under voltage alarm(V)","address":"E00C","type":"UInt16BE","rate": 0.2,"format":1,"unit": "V"},
                {"num":"15","name":"Battery discharge limit voltage(V)","address":"E00E","type":"UInt16BE","rate": 0.2,"format":1,"unit": "V"},
                {"num":"16","name":"Battery equalization enable(V)","address":"E206","type":"UInt16BE","unit": ["DIS","ENA"]},
                {"num":"17","name":"Battery equalization voltage(V)","address":"E007","type":"UInt16BE","rate": 0.2,"format":1,"unit": "V"},
                {"num":"18","name":"Battery equalized time(Min)","address":"E011","type":"UInt16BE","format":0,"unit": "Min"},
                {"num":"19","name":"Battery equalized time out(Min)","address":"E023","type":"UInt16BE","format":0,"unit": "Min"},
                {"num":"20","name":"Battery equalization interval(Day)","address":"E013","type":"UInt16BE","format":0,"unit": "Day"},
                {"num":"21","name":"Battery equalization immediately","address":"DF0D","type":"UInt16BE","unit": ["DIS","ENA"]},
                {"num":"22","name":"Power saving mode","address":"E20C","type":"UInt16BE","unit": ["DIS","ENA"]},
                {"num":"23","name":"Restart when over load","address":"E20D","type":"UInt16BE","unit": ["DIS","ENA"]},
                {"num":"24","name":"Restart when over temperature","address":"E20E","type":"UInt16BE","unit": ["DIS","ENA"]},
                {"num":"25","name":"Alarm enable","address":"E210","type":"UInt16BE","unit": ["DIS","ENA"]},
                {"num":"26","name":"Input change alarm","address":"E211","type":"UInt16BE","unit": ["DIS","ENA"]},
                {"num":"27","name":"Bypass output when over load","address":"E212","type":"UInt16BE","unit": ["DIS","ENA"]},
                {"num":"28","name":"Max AC charger current(A)","address":"E205","type":"UInt16BE","rate":0.1,"format":1,"unit": "A"},
                {"num":"29","name":"Split Phase","address":"E214","type":"UInt16BE","unit": ["DIS","ENA"]},
                {"num":"30","name":"RS485 Address","address":"E200","type":"UInt16BE","unit": ""},
                {"num":"31","name":"Parallel Mode (Not supported?)","address":"E201","type":"UInt16BE","unit": ["DIS","ENA"]},
                {"num":"32","name":"BMS enable (Not supported?)","address":"E215","type":"UInt16BE","unit": ["DIS","485 BMS","CAN BMS"]},
                {"num":"33","name":"BMS Protocol (Not supported?)","address":"E21B","type":"UInt16BE","unit": ["Pace","Rata","Allgrand","Oliter","PCT","Sunwoda","Dyness","WOW","Pylontech","WS Technicals","Uz Energy"]},
                {"num":"34","name":"Reserved","address":"E114","type":"UInt16BE","unit": ""},
                {"num":"35","name":"Battery undervoltage recovery(V)","address":"E00B","type":"UInt16BE","rate": 0.2,"format":1,"unit": "V"},
                {"num":"36","name":"Max PV charger current(A)","address":"E001","type":"UInt16BE","rate":0.1,"format":1,"unit": "A"},
                {"num":"37","name":"Battery charge recovery(V)","address":"E00A","type":"UInt16BE","rate": 0.2,"format":1,"unit": "V"},
                {"num":"38","name":"Output voltage set(V)","address":"E208","type":"UInt16BE","rate": 0.1,"format":1,"unit": "V"},
                {"num":"39","name":"System date time","address":"020C","type":3,"format":100,"unit": ""},
                {"num":"40","name":"Input password (Not supported?)","address":"E203","type":"UInt16BE","unit": ""},
                {"num":"41","name":"Change password (Not supported?)","address":"E202","type":"UInt16BE","unit": ""},
                {"num":"42","name":"Customer ID","address":"E117","type":"UInt16BE","unit": ""},
                {"num":"43","name":"Power rate(kW)","address":"E118","type":"UInt16BE","rate": 0.1,"format":1,"unit": "kW"},
                {"num":"44","name":"PV voltage rate(V)","address":"E11F","type":"UInt16BE","unit": "V"},
                {"num":"45","name":"Max charge current by PV(A)","address":"E120","type":"UInt16BE","rate":0.1,"format":1,"unit": "A"},
                {"num":"46","name":"Function enable 1 (Not supported?)","address":"E11D","type":"UInt16BE","unit": ""},
                {"num":"47","name":"Function enable 2 (Not supported?)","address":"E11E","type":"UInt16BE","unit": ""},
                {"num":"100","name":"APP version","address":"0014","type":"UInt16BE","rate":0.01,"format":2,"unit": ""},
                {"num":"101","name":"Bootloader sw version","address":"0015","type":"UInt16BE","rate":0.01,"format":2,"unit": ""},
                {"num":"102","name":"Compile time","address":"0021","type":20,"unit": ""},
                {"num":"103","name":"Product SN","address":"0035","type":20,"unit": ""},
                {"num":"104","name":"MachineState","address":"0210","type":"UInt16BE","rate":1,"format": 0,"unit":["Power on","Stand by","Initialization","Soft start","Running in line","Running in inverter","Invert to line","Line to invert","remain","remain","Shutdown","Fault"]},
                {"num":"105","name":"Current fault?","address":"0204","type":4,"format":101,"unit":["OK","Battery under voltage alarm",
                "Battery over current software",
                "Battery disconnect",
                "Battery under voltage(stop discharge)",
                "Battery over current hardware",
                "Charger over voltage",
                "Bus over voltage hardware",
                "Bus over voltage software",
                "Pv over voltage",
                "Pv over current software",
                "Pv over current hardware",
                "Line loss",
                "Bypass over load",
                "Inverter output over load",
                "Inverter output over current",
                "",
                "Inverter output short circuit",
                "",
                "PV DC-DC over temperature",
                "Inverter over temperature",
                "The fan is blocked or fails",
                "EEPROM error",
                "Machine type error",
                "",
                "",
                "Bypass relay short circiut",
                "",
                "",
                "Bus under voltage",
                "The battery capacity is lower than 10%",
                "The battery capacity is lower than 5%",
                "Low battery capacity shutdown",
                "",
                "CAN communication fault of parallel system",
                "The parallel ID is incorrect",
                "Parallel machine synchronous shutdown",
                "Parallel share current error",
                "The battery voltage difference in parallel mode is too large",
                "The mains input source in parallel mode is inconsistent",
                "Hardware synchronization signal in parallel mode is faulty",
                "The DC component of the inverter voltage is abnormal",
                "The parallel program version is inconsistent",
                "The parallel connection in parallel mode is faulty",
                "Incorrect serial number information",
                "The parallel mode is incorrectly set",
                "",
                "",
                "",
                "",
                "",
                "",
                "",
                "",
                "",
                "",
                "",
                "",
                "The BMS communication is faulty ",
                "BMS minor fault ",
                "BMS under temperature",
                "BMS over temperature",
                "BMS over current",
                "BMS under voltage",
                "BMS over voltage"
                ]},
                {"num":"106","name":"PVVoltage","address":"0107","type":"UInt16BE","rate":0.1,"format": 1,"unit":"V"},
                {"num":"107","name":"PVCurrent","address":"0108","type":"UInt16BE","rate":0.1,"format": 1,"unit":"A"},
                {"num":"108","name":"PVPower","address":"0109","type":"UInt16BE","rate":1,"format": 1,"unit":"W"},
                {"num":"109","name":"LineVoltage","address":"0213","type":"UInt16BE","rate":0.1,"format": 1,"unit":"V"},
                {"num":"110","name":"LineCurrent","address":"0214","type":"UInt16BE","rate":0.1,"format": 1,"unit":"A"},
                {"num":"111","name":"LineFrequency","address":"0215","type":"UInt16BE","rate":0.01,"format": 2,"unit":"Hz"},
                {"num":"112","name":"BatteryVoltage","address":"0101","type":"UInt16BE","rate":0.1,"format": 1,"unit":"V"},
                {"num":"113","name":"BatteryCurrent","address":"0102","type":"Int16BE","rate":0.1,"format": 1,"unit":"A"},
                {"num":"114","name":"BattreySoc","address":"0100","type":"UInt16BE","rate":1,"format": 0,"unit":"%"},
                {"num":"115","name":"ChargeCurrentByLine","address":"021E","type":"Int16BE","rate":0.1,"format": 1,"unit":"A"},
                {"num":"116","name":"LoadVoltage","address":"0216","type":"UInt16BE","rate":0.1,"format": 1,"unit":"V"},
                {"num":"117","name":"LoadCurrent","address":"0219","type":"UInt16BE","rate":0.1,"format": 1,"unit":"A"},
                {"num":"118","name":"LoadActivePower","address":"021B","type":"UInt16BE","rate":1,"format": 0,"unit":"W"},
                {"num":"119","name":"LoadApparentPower","address":"021C","type":"UInt16BE","rate":1,"format": 0,"unit":"VA"},
                {"num":"120","name":"LoadRatio","address":"021F","type":"UInt16BE","rate":1,"format": 0,"unit":"%"},
                {"num":"121","name":"Temperature DC","address": "0220","type":"Int16BE","rate":0.1,"format": 1,"unit":"˚C"},
                {"num":"122","name":"Temperature AC","address": "0221","type":"Int16BE","rate":0.1,"format": 1,"unit":"˚C"},
                {"num":"123","name":"Temperature TR","address": "0222","type":"Int16BE","rate":0.1,"format": 1,"unit":"˚C"},
                {"num":"124","name":"InverterCurrent","address": "0217","type":"UInt16BE","rate":0.1,"format": 1,"unit":"A"},
                {"num":"125","name":"InverterFrequency","address": "0218","type":"UInt16BE","rate":0.01,"format": 2,"unit":"Hz"},
                {"num":"126","name":"BatteryChargeStep","address": "010B","type":"UInt16BE","rate":1,"format": 0,"unit":["Not start","Const current","Const voltage","reserved","Float charge","reserved","Active charge","Active charge"]}, 
                {"num":"127","name":"BusVoltage","address": "0212","type":"UInt16BE","rate":0.1,"format": 1,"unit":"V"},
                {"num":"128","name":"LoadPowerConsumptionOnTheDay","address": "F030","type":"UInt16BE","rate":0.1,"format": 1,"unit":"KWH"},
                {"num":"129","name":"LoadPowerConsumptionOnTheDayFromMains","address": "F03D","type":"UInt16BE","rate":0.1,"format": 1,"unit":"KWH"},
                {"num":"130","name":"PVCumulativePowerGeneration","address": "F038","type":"UInt16BE","rate":0.1,"format": 1,"unit":"KWH"},
                {"num":"131","name":"CumulativeCharge??","address": "F05D","type":"UInt16BE","rate":0.1,"format": 1,"unit":"AH"},
                {"num":"132","name":"AccumulatedBatteryChargeHours??","address": "F02F","type":"UInt16BE","rate":1,"format": 0,"unit":"AH"},
                {"num":"133","name":"AccumulatedBatteryDischargeTime??","address": "F03D","type":"UInt16BE","rate":1,"format": 0,"unit":"AH"},
                {"num":"134","name":"LoadCumulativePowerConsumption","address": "F03A","type":"UInt16BE","rate":0.1,"format": 1,"unit":"KWH"},
                {"num":"135","name":"AccumulatedLoadFromMainsConsumption??","address": "F061","type":"UInt16BE","rate":0.1,"format": 1,"unit":"KWH"},
                {"num":"136","name":"PVPowerGenerationOnTheDay","address": "F02F","type":"UInt16BE","rate":0.1,"format": 1,"unit":"KWH"},
                {"num":"137","name":"BatteryChargeOnTheDay","address": "F02D","type":"UInt16BE","rate":1,"format": 0,"unit":"AH"},
                {"num":"138","name":"BatteryDischargeOnTheDay??","address": "F02E","type":"UInt16BE","rate":1,"format": 0,"unit":"AH"}
            ]
        },
        {"name": "get_smx_info","cmd": "{SEQ}00010003001100",
            "definition":[

                {"name":"Date(sec)","address": 73,"type":"UInt8","rate":1,"format": 0,"unit":""},
                {"name":"Date(min)","address": 72,"type":"UInt8","rate":1,"format": 0,"unit":""},
                {"name":"Date(hour)","address": 71,"type":"UInt8","rate":1,"format": 0,"unit":""},
                {"name":"BattreySoc","address": 20,"type":"UInt16BE","rate":1,"format": 0,"unit":"%"},
                {"name":"BatteryVoltage","address": 22,"type":"UInt16BE","rate":0.1,"format": 1,"unit":"V"},
                {"name":"BatteryCurrent","address": 24,"type":"Int16BE","rate":0.1,"format": 1,"unit":"A"},
                {"name":"PVVoltage","address": 30,"type":"UInt16BE","rate":0.1,"format": 1,"unit":"V"},
                {"name":"PVCurrent","address": 32,"type":"UInt16BE","rate":0.1,"format": 1,"unit":"A"},
                {"name":"PVPower","address": 34,"type":"UInt16BE","rate":1,"format": 1,"unit":"W"},
                {"name":"PVStatus?","address": 66,"type":"UInt16BE","rate":1,"format": 0,"unit":""},
                {"name":"BatteryStatus?","address": 52,"type":"UInt16BE","rate":1,"format": 0,"unit":""}, 
                {"name":"BatteryChargeStep?","address": 38,"type":"UInt16BE","rate":1,"format": 0,"unit":["Not start","Const current","Const voltage","reserved","Float charge","reserved","Active charge","Active charge"]}, 
                {"name":"CurrentFault1?","address": 52,"type":"Int16BE","rate":1,"format": 0,"unit":["OK","Battery under voltage alarm",
                    "Battery over current software",
                    "Battery disconnect",
                    "Battery under voltage(stop discharge)",
                    "Battery over current hardware",
                    "Charger over voltage",
                    "Bus over voltage hardware",
                    "Bus over voltage software",
                    "Pv over voltage",
                    "Pv over current software",
                    "Pv over current hardware",
                    "Line loss",
                    "Bypass over load",
                    "Inverter output over load",
                    "Inverter output over current",
                    "",
                    "Inverter output short circuit",
                    "",
                    "PV DC-DC over temperature",
                    "Inverter over temperature",
                    "The fan is blocked or fails",
                    "EEPROM error",
                    "Machine type error",
                    "",
                    "",
                    "Bypass relay short circiut",
                    "",
                    "",
                    "Bus under voltage",
                    "The battery capacity is lower than 10%",
                    "The battery capacity is lower than 5%",
                    "Low battery capacity shutdown",
                    "",
                    "CAN communication fault of parallel system",
                    "The parallel ID is incorrect",
                    "Parallel machine synchronous shutdown",
                    "Parallel share current error",
                    "The battery voltage difference in parallel mode is too large",
                    "The mains input source in parallel mode is inconsistent",
                    "Hardware synchronization signal in parallel mode is faulty",
                    "The DC component of the inverter voltage is abnormal",
                    "The parallel program version is inconsistent",
                    "The parallel connection in parallel mode is faulty",
                    "Incorrect serial number information",
                    "The parallel mode is incorrectly set",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "",
                    "The BMS communication is faulty ",
                    "BMS minor fault ",
                    "BMS under temperature",
                    "BMS over temperature",
                    "BMS over current",
                    "BMS under voltage",
                    "BMS over voltage"
                    ]},
                {"name":"CurrentFault2?","address": 54,"type":"Int16BE","rate":1,"format": 0,"unit":""},
                
                {"name":"LoadStatus?","address": 80,"type":"UInt16BE","rate":1,"format": 0,"unit":""}, 
                {"name":"LineVoltage","address": 86,"type":"UInt16BE","rate":0.1,"format": 1,"unit":"V"}, 
                {"name":"LineCurrent","address": 88,"type":"UInt16BE","rate":0.1,"format": 1,"unit":"A"},
                {"name":"LineFrequency","address": 90,"type":"UInt16BE","rate":0.01,"format": 2,"unit":"Hz"},
                {"name":"LoadVoltage","address": 92,"type":"UInt16BE","rate":0.1,"format": 1,"unit":"V"},
                {"name":"LoadCurrent","address": 98,"type":"UInt16BE","rate":0.1,"format": 1,"unit":"A"},
                {"name":"LoadActivePower","address": 102,"type":"UInt16BE","rate":1,"format": 0,"unit":"W"},
                {"name":"LoadApparentPower","address": 104,"type":"UInt16BE","rate":1,"format": 0,"unit":"VA"},
                {"name":"ChargeCurrentByLine","address": 108,"type":"Int16BE","rate":0.1,"format": 1,"unit":"A"},
                {"name":"LoadRatio","address": 110,"type":"UInt16BE","rate":1,"format": 0,"unit":"%"},
                {"name":"Temperature DC","address": 112,"type":"Int16BE","rate":0.1,"format": 1,"unit":"˚C"},
                {"name":"Temperature AC","address": 114,"type":"Int16BE","rate":0.1,"format": 1,"unit":"˚C"},
                {"name":"Temperature TR","address": 116,"type":"Int16BE","rate":0.1,"format": 1,"unit":"˚C"},
                {"name":"NameBatteryType?","address": 118,"type":"Int16BE","rate":1,"format": 0,"unit":["User def","SLD","FLD","GEL","LF14","LF15","LF16","LF7","LF8","LF9","NCA7","NCA8","NCA13","NCA14"]},
                {"name":"BusVoltage","address": 84,"type":"Int16BE","rate":0.1,"format": 1,"unit":"V"},
                {"name":"LoadPowerConsumptionOnTheDay","address": 254,"type":"Int16BE","rate":0.1,"format": 1,"unit":"KW"},
                {"name":"LoadPowerConsumptionOnTheDayFromMains","address": 280,"type":"Int16BE","rate":0.1,"format": 1,"unit":"KW"},
                {"name":"PVCumulativePowerGeneration","address": 270,"type":"Int16BE","rate":0.1,"format": 1,"unit":"KW"},
                {"name":"CumulativeCharge","address": 298,"type":"Int16BE","rate":0.1,"format": 1,"unit":"AH"},
                {"name":"AccumulatedBatteryChargeHours??","address": 262,"type":"Int16BE","rate":1,"format": 0,"unit":"AH"},
                {"name":"AccumulatedBatteryDischargeTime??","address": 266,"type":"Int16BE","rate":1,"format": 0,"unit":"AH"},
                {"name":"LoadCumulativePowerConsumption","address": 274,"type":"Int16BE","rate":0.1,"format": 1,"unit":"KWH"},
                {"name":"AccumulatedLoadFromMainsConsumption","address": 302,"type":"Int16BE","rate":0.1,"format": 1,"unit":"KWH"},
                {"name":"PVPowerGenerationOnTheDay","address": "F02F","type":"Int16BE","rate":0.1,"format": 1,"unit":"KWH"},
                {"name":"BatteryChargeOnTheDay","address": 248,"type":"Int16BE","rate":1,"format": 0,"unit":"AH"},
                {"name":"BatteryDischargeOnTheDay","address": 250,"type":"Int16BE","rate":1,"format": 0,"unit":"AH"}

                                
            ]
        }
    ]
}

